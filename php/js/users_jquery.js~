$(document).ready(function(){
    initView();
    loadUsers();
});


var initView = function () {
    $('#addUserBox').hide();
    $('.clickable').mouseenter(
        function() {
            $(this).css('cursor', 'pointer');
        }
    );
    
    $('#addUser').click(
        function() {
            $('#addUserBox').show();
        }
    );
}

var loadUsers = function() {
    // Only used for .json files - move to server for php files
    $.ajaxSetup({
	beforeSend: 
        function(xhr){
            if (xhr.overrideMimeType)
            {
                xhr.overrideMimeType("application/json");
            }
        }
    });
    
    $.getJSON(
        '../model/getUsers.php', 
        function(data) {
            $.each(data, function(dummy_key, val_array) {
		populateUserEntry(val_array);
            });
        }
    );
};

var populateUserEntry = function(user) {    
    var userRow = $("<tr></tr>").appendTo("#userList");
    $("<td></td>").html(user['name']).appendTo(userRow);
    $("<td></td>").html(user['username']).appendTo(userRow);
}



